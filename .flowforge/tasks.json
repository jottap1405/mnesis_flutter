{
  "tasks": [
    {
      "id": "MNESIS-057",
      "github_issue": 57,
      "title": "COMPLETED: Increase test coverage to 80%+ (Design System)",
      "description": "MVP Foundation - Week 1",
      "epic": "mvp-foundation",
      "milestone": "v1.0.0 - MVP Release",
      "status": "completed",
      "priority": "critical",
      "type": "testing",
      "size": "L",
      "hours": 8,
      "week": 1,
      "dependencies": [],
      "acceptance_criteria": [
        "86.8% test coverage achieved",
        "All design system tests passing (1,165 tests)",
        "Zero critical issues"
      ],
      "completedAt": "2026-01-23T15:10:56Z",
      "completionNotes": "Design system complete with Grade A (94/100 score), 86.8% test coverage, 1,165 passing tests. Foundation preserved for MVP."
    },
    {
      "id": "MNESIS-058",
      "github_issue": 63,
      "title": "Task 1.1: Supabase authentication setup",
      "description": "MVP Foundation - Week 1",
      "epic": "mvp-auth",
      "milestone": "v1.0.0 - MVP Release",
      "status": "backlog",
      "priority": "critical",
      "type": "feature",
      "size": "L",
      "hours": 6,
      "week": 1,
      "dependencies": [],
      "acceptance_criteria": [
        "supabase_flutter dependency added (^2.0.0)",
        "Supabase project created and configured",
        "Environment variables (.env) for SUPABASE_URL and SUPABASE_ANON_KEY",
        "Supabase client initialized in app startup",
        "Email/password authentication configured",
        "Session persistence enabled",
        "Auth state stream provider created (Riverpod)",
        "Unit tests for Supabase initialization"
      ],
      "technical_notes": "Use supabase_flutter package. Create .env file (excluded from git). Setup auth providers using Riverpod for reactive auth state."
    },
    {
      "id": "MNESIS-059",
      "github_issue": 59,
      "title": "Task 1.2: Login screen UI (placeholder design)",
      "description": "MVP Foundation - Week 1",
      "epic": "mvp-auth",
      "milestone": "v1.0.0 - MVP Release",
      "status": "backlog",
      "priority": "critical",
      "type": "ui",
      "size": "M",
      "hours": 4,
      "week": 1,
      "dependencies": ["MNESIS-058"],
      "acceptance_criteria": [
        "Login screen with email and password inputs",
        "Login button with loading state",
        "Sign up link/button",
        "Password visibility toggle",
        "Form validation (email format, password min length)",
        "Error display for failed login",
        "Uses Mnesis design system (MnesisColors, MnesisTextStyles)",
        "Widget tests for all states (normal, loading, error)"
      ],
      "technical_notes": "Simple, functional design. Designer will provide final design later. Focus on functionality and using design system tokens."
    },
    {
      "id": "MNESIS-060",
      "github_issue": 60,
      "title": "Task 1.3: Auth flow & session management",
      "description": "MVP Foundation - Week 1",
      "epic": "mvp-auth",
      "milestone": "v1.0.0 - MVP Release",
      "status": "backlog",
      "priority": "critical",
      "type": "feature",
      "size": "L",
      "hours": 6,
      "week": 1,
      "dependencies": ["MNESIS-058", "MNESIS-059"],
      "acceptance_criteria": [
        "Sign in with email/password integration",
        "Sign up with email/password integration",
        "Password reset flow (email)",
        "Logout functionality",
        "Session persistence across app restarts",
        "Token refresh automatic handling",
        "Auth guard for protected routes",
        "Redirect to login on session expiry",
        "Error handling for auth failures",
        "Unit tests for auth flow",
        "Integration tests for login/logout"
      ],
      "technical_notes": "Use Supabase auth methods. Implement AuthNotifier with Riverpod. Route guards using go_router redirect."
    },
    {
      "id": "MNESIS-061",
      "github_issue": 64,
      "title": "Task 1.4: SQLite cache layer foundation",
      "description": "MVP Foundation - Week 1",
      "epic": "mvp-cache",
      "milestone": "v1.0.0 - MVP Release",
      "status": "backlog",
      "priority": "high",
      "type": "database",
      "size": "M",
      "hours": 4,
      "week": 1,
      "dependencies": ["MNESIS-058"],
      "acceptance_criteria": [
        "DatabaseHelper class created (singleton pattern)",
        "Database initialization on app start",
        "Database version management",
        "Migration support structure",
        "Database path configuration (path_provider)",
        "Error handling for database operations",
        "Unit tests for database initialization"
      ],
      "technical_notes": "Use sqflite. Create lib/core/database/database_helper.dart. Keep it simple - only 2 tables for MVP."
    },
    {
      "id": "MNESIS-062",
      "github_issue": 62,
      "title": "Task 1.5: Patients cache table & repository",
      "description": "MVP Foundation - Week 1",
      "epic": "mvp-cache",
      "milestone": "v1.0.0 - MVP Release",
      "status": "backlog",
      "priority": "high",
      "type": "database",
      "size": "M",
      "hours": 5,
      "week": 1,
      "dependencies": ["MNESIS-061"],
      "acceptance_criteria": [
        "patients_cache table schema (id, name, cpf, birth_date, notes, last_sync, created_at, updated_at)",
        "PatientCacheModel with freezed for immutability",
        "PatientCacheRepository with CRUD methods",
        "Sync methods (fetch from API, save to cache)",
        "Query methods (search by name, filter, pagination)",
        "Repository uses Dartz Either for error handling",
        "Unit tests for repository (80%+ coverage)",
        "Mock data generator for testing"
      ],
      "technical_notes": "Create lib/features/patients/data/. Use freezed for models. Repository pattern with dependency injection."
    },
    {
      "id": "MNESIS-063",
      "github_issue": 63,
      "title": "Task 1.6: Attachments cache table & repository",
      "description": "MVP Foundation - Week 1",
      "epic": "mvp-cache",
      "milestone": "v1.0.0 - MVP Release",
      "status": "backlog",
      "priority": "high",
      "type": "database",
      "size": "M",
      "hours": 5,
      "week": 1,
      "dependencies": ["MNESIS-061"],
      "acceptance_criteria": [
        "attachments_cache table schema (id, patient_id, filename, file_type, file_path, upload_date, file_size, last_sync, created_at, updated_at)",
        "AttachmentCacheModel with freezed",
        "AttachmentCacheRepository with CRUD methods",
        "Foreign key to patients_cache table",
        "Query methods (filter by patient, by type, by date)",
        "Repository uses Dartz Either for error handling",
        "Unit tests for repository (80%+ coverage)",
        "Mock data generator for testing"
      ],
      "technical_notes": "Create lib/features/attachments/data/. Link to patients via patient_id. File paths for local cache."
    },
    {
      "id": "MNESIS-064",
      "github_issue": 64,
      "title": "Task 2.1: Navigation refactor - Login → Home → Chat flow",
      "description": "MVP Navigation - Week 2",
      "epic": "mvp-navigation",
      "milestone": "v1.0.0 - MVP Release",
      "status": "backlog",
      "priority": "critical",
      "type": "feature",
      "size": "L",
      "hours": 6,
      "week": 2,
      "dependencies": ["MNESIS-060"],
      "acceptance_criteria": [
        "Remove bottom navigation shell (preserve code, but disable)",
        "Routes: /login, /home, /chat/:patientId, /chat/:patientId/resumo, /chat/:patientId/anexos, /anexo/:attachmentId",
        "Auth guard redirects to /login if not authenticated",
        "Login success redirects to /home",
        "Home patient selection navigates to /chat/:patientId",
        "Deep linking support for all routes",
        "Route transitions configured (fade/slide)",
        "Navigation state persistence",
        "Unit tests for routing logic"
      ],
      "technical_notes": "Refactor AppRouter to remove ShellRoute. Keep old shell code commented for future use. Use go_router redirect for auth."
    },
    {
      "id": "MNESIS-065",
      "github_issue": 65,
      "title": "Task 2.2: PageView for Chat ↔ Resumo ↔ Anexos",
      "description": "MVP Navigation - Week 2",
      "epic": "mvp-navigation",
      "milestone": "v1.0.0 - MVP Release",
      "status": "backlog",
      "priority": "critical",
      "type": "ui",
      "size": "M",
      "hours": 5,
      "week": 2,
      "dependencies": ["MNESIS-064"],
      "acceptance_criteria": [
        "PageView with 3 pages: Chat (index 1 - middle), Resumo (index 0 - left), Anexos (index 2 - right)",
        "PageController with initial page = 1 (Chat is default)",
        "Swipe gestures between pages",
        "Page indicator dots (optional)",
        "Smooth transitions between pages",
        "State preservation when swiping",
        "Patient context shared across all 3 pages",
        "Widget tests for PageView behavior"
      ],
      "technical_notes": "Create ChatContainerScreen wrapping PageView. Chat screen is center, swipe left for Resumo, swipe right for Anexos."
    },
    {
      "id": "MNESIS-066",
      "github_issue": 66,
      "title": "Task 2.3: Patient context provider (Riverpod)",
      "description": "MVP Navigation - Week 2",
      "epic": "mvp-state",
      "milestone": "v1.0.0 - MVP Release",
      "status": "backlog",
      "priority": "high",
      "type": "feature",
      "size": "S",
      "hours": 3,
      "week": 2,
      "dependencies": ["MNESIS-062"],
      "acceptance_criteria": [
        "CurrentPatientProvider (Riverpod StateNotifier)",
        "setPatient() method to set active patient",
        "clearPatient() method on logout/navigation",
        "Reactive updates across all screens",
        "Patient data loaded from cache",
        "Error state handling",
        "Unit tests for provider logic"
      ],
      "technical_notes": "Use Riverpod StateNotifier. Create lib/features/patients/presentation/providers/current_patient_provider.dart."
    },
    {
      "id": "MNESIS-067",
      "github_issue": 67,
      "title": "Task 3.1: Home screen - Patient list UI",
      "description": "MVP Screens - Week 2",
      "epic": "mvp-screens",
      "milestone": "v1.0.0 - MVP Release",
      "status": "backlog",
      "priority": "critical",
      "type": "ui",
      "size": "M",
      "hours": 5,
      "week": 2,
      "dependencies": ["MNESIS-062", "MNESIS-064"],
      "acceptance_criteria": [
        "AppBar with app title and logout button",
        "Search bar for patient filtering (debounced)",
        "Stats cards (Total Patients, Active Today, Pending)",
        "Patient list (ListView.builder with mock data)",
        "Patient card showing: avatar, name, last interaction",
        "Tap card navigates to /chat/:patientId",
        "Pull to refresh (mocked)",
        "Empty state when no patients",
        "Loading state skeleton",
        "Uses Mnesis design system",
        "Widget tests for all states"
      ],
      "technical_notes": "Create lib/features/home/presentation/home_screen.dart. Use mock patient data for MVP. Stats are hardcoded for now."
    },
    {
      "id": "MNESIS-068",
      "github_issue": 68,
      "title": "Task 3.2: Chat Assistente screen UI",
      "description": "MVP Screens - Week 2",
      "epic": "mvp-screens",
      "milestone": "v1.0.0 - MVP Release",
      "status": "backlog",
      "priority": "critical",
      "type": "ui",
      "size": "L",
      "hours": 6,
      "week": 2,
      "dependencies": ["MNESIS-065", "MNESIS-066"],
      "acceptance_criteria": [
        "Patient header bar (avatar, name, age)",
        "Chat message list (ListView with mock messages)",
        "Message bubbles (AI: left-aligned dark gray, User: right-aligned transparent)",
        "Input field at bottom (multiline support)",
        "Send button (shows when text present)",
        "Voice button (shows when text empty, disabled for MVP)",
        "Typing indicator (3-dot animation)",
        "Auto-scroll to bottom on new message",
        "Mock chat responses (predefined answers)",
        "Uses Mnesis design system",
        "Widget tests for all components"
      ],
      "technical_notes": "Create lib/features/chat/presentation/chat_screen.dart. Mock AI responses with 1-2 second delay. No real backend yet."
    },
    {
      "id": "MNESIS-069",
      "github_issue": 69,
      "title": "Task 3.3: Resumo Paciente screen",
      "description": "MVP Screens - Week 2",
      "epic": "mvp-screens",
      "milestone": "v1.0.0 - MVP Release",
      "status": "backlog",
      "priority": "high",
      "type": "ui",
      "size": "M",
      "hours": 4,
      "week": 2,
      "dependencies": ["MNESIS-065", "MNESIS-066"],
      "acceptance_criteria": [
        "Patient header (same as Chat screen)",
        "Demographics section (Name, CPF, Birth Date, Age)",
        "Medical history section (placeholder text)",
        "Medications section (placeholder list)",
        "Allergies section (placeholder list)",
        "Notes section (editable text field - mocked)",
        "All data from mock patient context",
        "Scrollable layout",
        "Uses Mnesis design system",
        "Widget tests for layout"
      ],
      "technical_notes": "Create lib/features/patients/presentation/patient_summary_screen.dart. Display data from CurrentPatientProvider. Edit capabilities mocked."
    },
    {
      "id": "MNESIS-070",
      "github_issue": 70,
      "title": "Task 3.4: Anexos screen (attachment list)",
      "description": "MVP Screens - Week 2",
      "epic": "mvp-screens",
      "milestone": "v1.0.0 - MVP Release",
      "status": "backlog",
      "priority": "high",
      "type": "ui",
      "size": "M",
      "hours": 4,
      "week": 2,
      "dependencies": ["MNESIS-063", "MNESIS-065", "MNESIS-066"],
      "acceptance_criteria": [
        "Patient header (same as Chat screen)",
        "Attachment list (ListView with mock attachments)",
        "Attachment card showing: icon (by file type), filename, date, size",
        "Tap attachment navigates to /anexo/:attachmentId",
        "Filter by file type (All, PDF, Image, Document)",
        "Search bar for filename filtering",
        "Empty state when no attachments",
        "Loading state skeleton",
        "Uses Mnesis design system",
        "Widget tests for all states"
      ],
      "technical_notes": "Create lib/features/attachments/presentation/attachments_list_screen.dart. Data from AttachmentCacheRepository with mock data."
    },
    {
      "id": "MNESIS-071",
      "github_issue": 71,
      "title": "Task 3.5: Visualização de Anexo screen (PDF viewer)",
      "description": "MVP Screens - Week 2",
      "epic": "mvp-screens",
      "milestone": "v1.0.0 - MVP Release",
      "status": "backlog",
      "priority": "medium",
      "type": "ui",
      "size": "M",
      "hours": 5,
      "week": 2,
      "dependencies": ["MNESIS-070"],
      "acceptance_criteria": [
        "pdfx or syncfusion_flutter_pdfviewer dependency added",
        "PDF viewer for PDF files",
        "Image viewer for images (jpg, png)",
        "Zoom and pan gestures",
        "Page navigation for PDFs (next/previous buttons)",
        "Share button (mocked for MVP)",
        "Download button (mocked for MVP)",
        "Loading state while file loads",
        "Error state for failed load",
        "Back button navigation",
        "Uses Mnesis design system for controls",
        "Widget tests for viewer"
      ],
      "technical_notes": "Create lib/features/attachments/presentation/attachment_viewer_screen.dart. Use mock PDF/image files for testing."
    },
    {
      "id": "MNESIS-072",
      "github_issue": 72,
      "title": "Task 4.1: Mock data service for patients",
      "description": "MVP Testing - Week 2",
      "epic": "mvp-mock-data",
      "milestone": "v1.0.0 - MVP Release",
      "status": "backlog",
      "priority": "high",
      "type": "feature",
      "size": "S",
      "hours": 3,
      "week": 2,
      "dependencies": ["MNESIS-062"],
      "acceptance_criteria": [
        "MockPatientService class created",
        "Generate 20+ realistic mock patients",
        "Patient names, CPF (fake but valid format), birth dates, notes",
        "Seed data inserted on first app launch",
        "Reset mock data method for testing",
        "Realistic variation in patient data",
        "Unit tests for mock service"
      ],
      "technical_notes": "Create lib/core/mocks/mock_patient_service.dart. Use faker package for realistic data. Seed on database init."
    },
    {
      "id": "MNESIS-073",
      "github_issue": 73,
      "title": "Task 4.2: Mock data service for attachments",
      "description": "MVP Testing - Week 2",
      "epic": "mvp-mock-data",
      "milestone": "v1.0.0 - MVP Release",
      "status": "backlog",
      "priority": "high",
      "type": "feature",
      "size": "S",
      "hours": 3,
      "week": 2,
      "dependencies": ["MNESIS-063", "MNESIS-072"],
      "acceptance_criteria": [
        "MockAttachmentService class created",
        "Generate 50+ mock attachments across patients",
        "Mix of file types (PDF, JPG, PNG, DOC)",
        "Mock file paths (stored in assets for testing)",
        "Realistic file sizes and dates",
        "Link attachments to mock patients",
        "Seed data inserted on first app launch",
        "Unit tests for mock service"
      ],
      "technical_notes": "Create lib/core/mocks/mock_attachment_service.dart. Create test_assets/ with sample PDFs and images."
    },
    {
      "id": "MNESIS-074",
      "github_issue": 74,
      "title": "Task 4.3: Mock chat response service",
      "description": "MVP Testing - Week 2",
      "epic": "mvp-mock-data",
      "milestone": "v1.0.0 - MVP Release",
      "status": "backlog",
      "priority": "medium",
      "type": "feature",
      "size": "S",
      "hours": 2,
      "week": 2,
      "dependencies": ["MNESIS-068"],
      "acceptance_criteria": [
        "MockChatService class created",
        "Predefined responses for common queries",
        "Keyword matching for responses (e.g., 'medicação' → medication list)",
        "Random delay (1-3 seconds) to simulate thinking",
        "Typing indicator during delay",
        "Fallback response for unknown queries",
        "Context-aware responses (uses patient data)",
        "Unit tests for response matching"
      ],
      "technical_notes": "Create lib/features/chat/data/services/mock_chat_service.dart. Simple keyword matching for MVP. No real AI yet."
    },
    {
      "id": "MNESIS-075",
      "github_issue": 75,
      "title": "Task 5.1: Integration test - Auth flow",
      "description": "MVP Testing - Week 2",
      "epic": "mvp-testing",
      "milestone": "v1.0.0 - MVP Release",
      "status": "backlog",
      "priority": "high",
      "type": "testing",
      "size": "M",
      "hours": 4,
      "week": 2,
      "dependencies": ["MNESIS-060"],
      "acceptance_criteria": [
        "Integration test for login flow",
        "Integration test for logout flow",
        "Integration test for session persistence",
        "Integration test for auth guard redirect",
        "Test using mock Supabase client",
        "All tests passing",
        "80%+ coverage for auth module"
      ],
      "technical_notes": "Create integration_test/auth_flow_test.dart. Mock Supabase client for testing. Use flutter_test."
    },
    {
      "id": "MNESIS-076",
      "github_issue": 76,
      "title": "Task 5.2: Integration test - Navigation flow",
      "description": "MVP Testing - Week 2",
      "epic": "mvp-testing",
      "milestone": "v1.0.0 - MVP Release",
      "status": "backlog",
      "priority": "high",
      "type": "testing",
      "size": "M",
      "hours": 4,
      "week": 2,
      "dependencies": ["MNESIS-064", "MNESIS-065"],
      "acceptance_criteria": [
        "Integration test for Login → Home → Chat flow",
        "Integration test for PageView swipe navigation",
        "Integration test for deep linking",
        "Integration test for back navigation",
        "All tests passing",
        "80%+ coverage for routing"
      ],
      "technical_notes": "Create integration_test/navigation_flow_test.dart. Test full user journey. Use flutter_test and patrol for gestures."
    },
    {
      "id": "MNESIS-077",
      "github_issue": 77,
      "title": "Task 5.3: Integration test - Patient selection & chat",
      "description": "MVP Testing - Week 2",
      "epic": "mvp-testing",
      "milestone": "v1.0.0 - MVP Release",
      "status": "backlog",
      "priority": "high",
      "type": "testing",
      "size": "M",
      "hours": 4,
      "week": 2,
      "dependencies": ["MNESIS-067", "MNESIS-068"],
      "acceptance_criteria": [
        "Integration test for selecting patient from home",
        "Integration test for sending chat message",
        "Integration test for receiving mock response",
        "Integration test for chat history",
        "All tests passing",
        "80%+ coverage for chat flow"
      ],
      "technical_notes": "Create integration_test/chat_flow_test.dart. Test end-to-end chat interaction with mock service."
    },
    {
      "id": "MNESIS-078",
      "github_issue": 78,
      "title": "Task 6.1: Code review & refactoring",
      "description": "MVP Polish - Week 2",
      "epic": "mvp-polish",
      "milestone": "v1.0.0 - MVP Release",
      "status": "backlog",
      "priority": "high",
      "type": "chore",
      "size": "M",
      "hours": 4,
      "week": 2,
      "dependencies": ["MNESIS-077"],
      "acceptance_criteria": [
        "flutter analyze shows zero issues",
        "All files < 700 lines (Rule #24)",
        "All functions documented with Dart docs (Rule #26)",
        "Code follows Flutter best practices",
        "No print() statements in production code (Rule #8)",
        "Consistent naming across codebase (Rule #23)",
        "No duplicate code",
        "Proper error handling everywhere"
      ],
      "technical_notes": "Run flutter analyze. Use fft-code-reviewer agent. Refactor as needed. Update documentation."
    },
    {
      "id": "MNESIS-079",
      "github_issue": 79,
      "title": "Task 6.2: Performance optimization",
      "description": "MVP Polish - Week 2",
      "epic": "mvp-polish",
      "milestone": "v1.0.0 - MVP Release",
      "status": "backlog",
      "priority": "medium",
      "type": "performance",
      "size": "M",
      "hours": 3,
      "week": 2,
      "dependencies": ["MNESIS-078"],
      "acceptance_criteria": [
        "Profile app with Flutter DevTools",
        "Optimize widget rebuilds (use const where possible)",
        "Lazy loading for patient list",
        "Image caching for avatars",
        "Debounce search inputs",
        "60 FPS on mid-range devices",
        "App size < 30 MB",
        "Performance benchmarks documented"
      ],
      "technical_notes": "Use DevTools Performance tab. Add const constructors. Implement pagination for lists. Use cached_network_image."
    },
    {
      "id": "MNESIS-080",
      "github_issue": 80,
      "title": "Task 6.3: Documentation finalization",
      "description": "MVP Polish - Week 2",
      "epic": "mvp-polish",
      "milestone": "v1.0.0 - MVP Release",
      "status": "backlog",
      "priority": "medium",
      "type": "documentation",
      "size": "S",
      "hours": 3,
      "week": 2,
      "dependencies": ["MNESIS-078"],
      "acceptance_criteria": [
        "README.md updated with MVP scope and setup",
        "ARCHITECTURE.md created with Clean Architecture diagram",
        "API.md created with mock service documentation",
        "TESTING.md created with test coverage report",
        "All Dart files have complete doc comments",
        "Setup instructions tested on fresh machine",
        "Screenshots added to documentation"
      ],
      "technical_notes": "Use fft-documentation agent. Update all docs to reflect MVP state. Add architecture diagrams."
    },
    {
      "id": "MNESIS-081",
      "github_issue": 81,
      "title": "Task 6.4: MVP demo preparation",
      "description": "MVP Polish - Week 2",
      "epic": "mvp-polish",
      "milestone": "v1.0.0 - MVP Release",
      "status": "backlog",
      "priority": "medium",
      "type": "chore",
      "size": "S",
      "hours": 2,
      "week": 2,
      "dependencies": ["MNESIS-080"],
      "acceptance_criteria": [
        "Demo user account created in Supabase",
        "Mock data includes realistic patient scenarios",
        "Demo script created (step-by-step walkthrough)",
        "App tested on both iOS and Android",
        "Build APK for Android testing",
        "Build iOS archive for TestFlight (optional)",
        "Demo video recorded (optional)",
        "Known limitations documented"
      ],
      "technical_notes": "Prepare for stakeholder demo. Test happy path thoroughly. Document any bugs/limitations for transparency."
    }
  ]
}
